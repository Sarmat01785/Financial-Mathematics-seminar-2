## Задача 1: Оценка инвестиционного проекта

Есть инвестиционный проект с денежными потоками по кварталам:

| Квартал       | 0    | 1    | 2    | 3    | 4    | 5    |
|---------------|------|------|------|------|------|------|
| Денежный поток| -1200| 100  | 200  | 300  | 400  | 500  |

Необходимо принять решение, инвестируем в проект или нет, если ставка дисконтирования 15% годовых.

### Решение: Вариант 1


```python
!pip install numpy_financial
```

    Defaulting to user installation because normal site-packages is not writeable
    Collecting numpy_financial
      Obtaining dependency information for numpy_financial from https://files.pythonhosted.org/packages/6a/be/d07585e440d58835bad8f1c9ca7823b5252ffeda4c797e653a20215fca65/numpy_financial-1.0.0-py3-none-any.whl.metadata
      Downloading numpy_financial-1.0.0-py3-none-any.whl.metadata (2.2 kB)
    Requirement already satisfied: numpy>=1.15 in c:\users\sarmat\anaconda3\lib\site-packages (from numpy_financial) (1.24.3)
    Downloading numpy_financial-1.0.0-py3-none-any.whl (14 kB)
    Installing collected packages: numpy_financial
    Successfully installed numpy_financial-1.0.0
    


```python
import numpy as np
import numpy_financial as npf

# Заданные денежные потоки и ставка дисконтирования
cash_flows = np.array([-1200, 100, 200, 300, 400, 500])
annual_discount_rate = 0.15  # Годовая ставка дисконтирования

# Расчет ставки дисконтирования на квартальной основе
quarterly_discount_rate = annual_discount_rate / 4

# Проверка входных данных
assert quarterly_discount_rate >= 0 and quarterly_discount_rate <= 1, "Ставка дисконтирования должна быть в пределах от 0 до 1."

# Расчет NPV
npv = npf.npv(quarterly_discount_rate, cash_flows)

# Вывод NPV проекта
print(f"NPV проекта: {npv:.2f}")

# Принятие решения
if npv > 0:
    print("Инвестируем в проект.")
else:
    print("Не инвестируем в проект.")
```

    NPV проекта: 111.99
    Инвестируем в проект.
    

## Задача 1: Оценка инвестиционного проекта

Есть инвестиционный проект с денежными потоками по кварталам:

| Квартал       | 0    | 1    | 2    | 3    | 4    | 5    |
|---------------|------|------|------|------|------|------|
| Денежный поток| -1200| 100  | 200  | 300  | 400  | 500  |

Необходимо принять решение, инвестируем в проект или нет, если ставка дисконтирования 15% годовых.

### Решение: Вариант 2

Для начала нам нужно преобразовать все денежные потоки в эквивалентные значения на начало проекта (то есть на квартал 0). Для этого мы должны дисконтировать каждый денежный поток на соответствующий период. Ставка дисконтирования составляет 15% годовых, поэтому для расчета квартальной ставки дисконтирования мы делим годовую ставку на 4:

$$ r = \frac{0.15}{4} = 0.0375 $$

Теперь рассчитаем дисконтированные значения каждого денежного потока:

| Квартал | Денежный поток | Дисконтированный денежный поток |
|---------|----------------|----------------------------------|
| 0       | -1200          | -1200                            |
| 1       |  100           |  96.30                           |
| 2       |  200           |  186.96                          |
| 3       |  300           |  260.41                          |
| 4       |  400           |  322.05                          |
| 5       |  500           |  385.11                          |

Мы использовали формулу:

$$ DP_t = CF_t / (1 + r)^t $$

где $DP_t$ - дисконтированный денежный поток в квартале t, $CF_t$ - денежный поток в квартале t, $r$ - квартальная ставка дисконтирования, $t$ - номер квартала (начиная с 0).

Теперь сложим все дисконтированные денежные потоки, чтобы получить чистую приведенную стоимость:

$$ NPV = -1200 + 96.30 + 186.96 + 260.41 + 322.05 + 385.11 = 1040.83 $$

Таким образом, чистая приведенная стоимость проекта положительна, что говорит о его эффективности. Инвестировать в этот проект стоит.                                                    


```python
import pandas as pd
from math import pow

# Исходные данные
cashflows = [-1200, 100, 200, 300, 400, 500]
quarters = range(len(cashflows))

# Расчет квартальной ставки дисконтирования
annual_rate = 0.15
quarterly_rate = annual_rate / 4

# Расчет дисконтированных денежных потоков
discounted_cashflows = [cf / (1 + quarterly_rate)  **  q for cf, q in zip(cashflows, quarters)]

# Расчет чистой приведенной стоимости (NPV)
npv = sum(discounted_cashflows)

print("Чистая приведенная стоимость (NPV) проекта:", npv)
```

    Чистая приведенная стоимость (NPV) проекта: 111.98857701149086
    

## Задача 2: Расчет NPV с переменной ставкой дисконтирования

Имеется инвестиционный проект с денежными потоками по годам:

| Год           | 0    | 1    | 2    | 3    | 4    | 5    | 6    |
|---------------|------|------|------|------|------|------|------|
| Денежный поток| -1500| 100  | 200  | 300  | 400  | 500  | 600  |

Ставка дисконтирования изменяется со временем:
- Первые два года она составляет 20%.
- Следующие два года ставка составляет 15%.
- Затем ставка снижается до 10%.
- найти NPV

### Решение:


```python
def calculate_npv(cashflows, discount_rates):
    """
    Функция для расчета NPV с различными ставками дисконтирования.
    
    :param cashflows: Список денежных потоков.
    :param discount_rates: Список ставок дисконтирования для соответствующих лет.
    :return: Чистая приведенная стоимость (NPV).
    """
    
    npv = 0.0
    
    # Проходим по каждому денежному потоку и соответствующей ему ставке дисконтирования
    for i in range(len(cashflows)):
        npv += cashflows[i] / ((1 + discount_rates[i]) ** i)
    
    return npv

# Исходные данные
cashflows = [-1500, 100, 200, 300, 400, 500, 600]
discount_rates = [0.20, 0.20, 0.15, 0.15, 0.10, 0.10, 0.10]

# Расчет NPV
npv = calculate_npv(cashflows, discount_rates)

print(f"NPV = {npv:.2f}")
```

    NPV = -145.83
    

## Задача 3

Для проекта из задачи 2 найти внутреннюю норму доходности.

### Решение:


```python
import numpy_financial as npf

# Исходные данные
cashflows = [-1500, 100, 200, 300, 400, 500, 600]

# Расчет IRR
irr = npf.irr(cashflows)

print(f"IRR инвестиционного проекта составляет: {irr:.2%}")
```

    IRR инвестиционного проекта составляет: 8.25%
    

## Задача 4: Выбор инвестиционного проекта по максимальной доходности

Имеются два инвестиционных проекта с указанными денежными потоками по годам:

| Год / Проект  | 0    | 1    | 2    | 3    | 4    | 5    |
|---------------|------|------|------|------|------|------|
| Проект А      |-1000 | 100  | 250  | 450  | 500  | 550  |
| Проект Б      |-1000 | 200  | 300  | 400  | 450  | 500  |

Стоимость денег для инвестора составляет 10%. Необходимо определить, в какой проект инвестор должен вложиться, чтобы получить максимальную доходность на вложенные средства.

### Решение:


```python
import numpy_financial as npf

# Стоимость капитала
discount_rate = 0.10

# Денежные потоки проектов
cashflows_project_a = [-1000, 100, 250, 450, 500, 550]
cashflows_project_b = [-1000, 200, 300, 400, 450, 500]

# Расчет NPV каждого проекта
npv_a = npf.npv(discount_rate, cashflows_project_a)
npv_b = npf.npv(discount_rate, cashflows_project_b)

# Расчет индекса рентабельности для каждого проекта
pi_a = npv_a / -cashflows_project_a[0]
pi_b = npv_b / -cashflows_project_b[0]

# Вывод результатов
print(f"Индекс рентабельности проекта А: {pi_a:.2f}")
print(f"Индекс рентабельности проекта Б: {pi_b:.2f}")

# Определение наилучшего проекта
best_project = "А" if pi_a > pi_b else "Б"
print(f"Инвестор должен выбрать проект '{best_project}', так как он имеет более высокий индекс рентабельности.")
```

    Индекс рентабельности проекта А: 0.32
    Индекс рентабельности проекта Б: 0.35
    Инвестор должен выбрать проект 'Б', так как он имеет более высокий индекс рентабельности.
    

### Задача 5

Есть два инвестиционных проекта со следующими денежными потоками:
Год 0 1 2 3 4 5
Проект А -1000 100 250 450 500 550
Проект Б -1000 200 300 400 450 500
Инвестор хочет выбрать один из проектов по критерию ликвидности с учетом временной стоимости денег в размере 10% годовых. Какой он должен выбрать?

## Задача 5: Выбор инвестиционного проекта по критерию ликвидности

Имеются два инвестиционных проекта с указанными денежными потоками по годам:

| Год / Проект  | 0     | 1    | 2    | 3    | 4    | 5    |
|---------------|-------|------|------|------|------|------|
| Проект А      | -1000 | 100  | 250  | 450  | 500  | 550  |
| Проект Б      | -1000 | 200  | 300  | 400  | 450  | 500  |

Инвестор хочет выбрать один из проектов по критерию ликвидности с учетом временной стоимости денег в размере 10% годовых. Какой он должен выбрать? 

### Решение:


```python
def discounted_payback_period(cashflows, discount_rate):
    """
    Рассчитывает дисконтированный срок окупаемости инвестиционного проекта.
    
    Дисконтированный срок окупаемости - это период времени, необходимый для того,
    чтобы сумма дисконтированных денежных потоков покрыла первоначальные инвестиции.
    
    :param cashflows: Список денежных потоков проекта, где первый элемент - начальные инвестиции.
    :param discount_rate: Ставка дисконтирования, используемая для расчета приведенной стоимости.
    :return: Дисконтированный срок окупаемости в годах или None, если проект не окупается.
    """
    cumulative_cashflow = 0
    for i, cashflow in enumerate(cashflows):
        discounted_cashflow = cashflow / ((1 + discount_rate) ** i)
        cumulative_cashflow += discounted_cashflow
        if cumulative_cashflow >= 0:
            # Последний накопленный отрицательный денежный поток
            previous_cumulative_cashflow = cumulative_cashflow - discounted_cashflow
            # Остаток для окупаемости
            unrecovered_investment = abs(previous_cumulative_cashflow)
            # Денежный поток в текущем году
            current_year_cashflow = discounted_cashflow
            # Расчет доли года, необходимой для окупаемости остатка инвестиции
            fraction_of_year = unrecovered_investment / current_year_cashflow
            return i - 1 + fraction_of_year
    return None  # Возвращает None, если инвестиции не окупаются в течение заданного периода

# Стоимость капитала
discount_rate = 0.10

# Денежные потоки проектов
cashflows_project_a = [-1000, 100, 250, 450, 500, 550]
cashflows_project_b = [-1000, 200, 300, 400, 450, 500]

# Расчет дисконтированного срока окупаемости для каждого проекта
dpp_a = discounted_payback_period(cashflows_project_a, discount_rate)
dpp_b = discounted_payback_period(cashflows_project_b, discount_rate)

# Вывод результатов
print(f"Дисконтированный срок окупаемости проекта А: {dpp_a:.2f} лет")
print(f"Дисконтированный срок окупаемости проекта Б: {dpp_b:.2f} лет")

# Определение наилучшего проекта по критерию ликвидности
best_project = "А" if dpp_a < dpp_b else "Б"
print(f"Инвестор должен выбрать проект '{best_project}' согласно критерию ликвидности.")
```

    Дисконтированный срок окупаемости проекта А: 4.07 лет
    Дисконтированный срок окупаемости проекта Б: 3.88 лет
    Инвестор должен выбрать проект 'Б' согласно критерию ликвидности.
    
